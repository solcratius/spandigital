"use strict";var SPANDIGITAL=SPANDIGITAL||{};!function(){SPANDIGITAL.namespace=function(t){var i,n=t.split("."),e=SPANDIGITAL;for("SPANDIGITAL"===n[0]&&(n=n.slice(1)),i=0;i<n.length;i+=1)"undefined"==typeof e[n[i]]&&(e[n[i]]={}),e=e[n[i]];return e}}(),SPANDIGITAL.namespace("controller"),SPANDIGITAL.controller=function(){var t=function(){var t=document.documentElement;t.setAttribute("data-useragent",navigator.userAgent),window.onload=function(){SPANDIGITAL.main.init()}};return{init:t}}(),jQuery(document).ready(function(){SPANDIGITAL.controller.init()}),SPANDIGITAL.namespace("main"),SPANDIGITAL.main=function(t){var i,n,e,o,s,a,l,c,r,h,d,u="home",f=function(){_();var t=p().dlink;if(i=SPANDIGITAL.main.nav,n=SPANDIGITAL.main.landing,s.addClass("noTouch"),r.hasClass("office")&&(u="office"),r.hasClass("home")||r.hasClass("office")||(u="case-study"),n.init(),$.init(),T.init(),A.init(),"home"==u)b.init(),o.animate({scrollTop:0},0),setTimeout(function(){b.setPosTop(),t&&m(t)},10);else{var e=window.location.hash;setTimeout(function(){if(o.animate({scrollTop:0},0),e){var t=T.m_view?48:78;o.animate({scrollTop:r.find("section"+e).offset().top-t+"px"},750,"easeInOutCubic")}},10)}g.init(),i.init(),setTimeout(function(){s.addClass("noResize")},1e3)},p=function(){for(var t,i=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),e=0;e<n.length;e++)t=n[e].split("="),i.push(t[0]),i[t[0]]=t[1];return i},m=function(i){h.each(function(n){if(i==t(this).attr("id"))return b.anchorAnim(n,"dlink"),!1})},v=function(t,i){return Math.floor(Math.random()*(1+i-t))+t},_=function(){e=t(window),o=t("html, body"),s=t("html"),a=t("body"),l=t("#header"),c=l.find(".masthead"),r=t("#contents"),h=r.find("section"),d=r.find(".hero")},$={isTouch:!1,init:function(){this.is_touch_device()&&(this.isTouch=!0,s.removeClass("noTouch"),document.addEventListener("touchstart",function(){},!0))},is_touch_device:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},T={width:0,height:0,m_view:!1,time:null,timeout:!1,delta:200,init:function(){T.width=e.width(),T.height=e.height(),c.height()<70?T.m_view=!0:T.m_view=!1,$.isTouch?e.on("orientationchange",this.start.bind(this)):e.on("resize",this.start.bind(this))},start:function(){this.time=new Date,T.timeout===!1&&(T.timeout=!0,s.removeClass("noResize"),setTimeout(T.end,T.delta))},end:function(){new Date-T.time<T.delta?setTimeout(T.end,T.delta):(T.timeout=!1,s.addClass("noResize"),c.height()<70?T.m_view=!0:T.m_view=!1,T.width=e.width(),T.height=e.height(),A.hero_set(),b.setPosTop(),b.anchorAnim(),"home"==u&&i.capabilities_update())}},g={lastScrollTop:0,st:0,hash:!1,init:function(){e.on("scroll",this.start.bind(this))},start:function(){this.st=e.scrollTop(),this.st>this.lastScrollTop?(this.st>=A.navH&&!a.hasClass("sticky-init")&&a.addClass("sticky-init"),this.st>A.heroH-A.navH&&!l.hasClass("sticky-nav")&&l.addClass("sticky-nav"),"home"==u&&b.setPosId(this.st,"down")):(this.st<A.navH&&a.hasClass("sticky-init")&&a.removeClass("sticky-init"),this.st<A.heroH-A.navH&&l.hasClass("sticky-nav")&&l.removeClass("sticky-nav"),"home"==u&&b.setPosId(this.st,"up")),this.lastScrollTop=this.st}},A={heroH:0,navH:0,init:function(){this.hero_set(),"home"==u&&this.landingAnim()},hero_set:function(){"home"==u?(this.heroH=d.outerHeight(),this.navH=c.height()):(this.navH=21,this.heroH=d.outerHeight()+41)},landingAnim:function(){var t=v(0,10);console.log("hero option: "+t),t<1?d.find(".canvas").addClass("shimmer-anim"):t>=1&&t<4?(d.find(".canvas").addClass("line-anim"),A.particle_lines()):t>=4&&t<7?(d.find(".canvas").addClass("circle-anim"),A.particle_circles()):(d.find(".canvas").addClass("network-anim"),A.particle_network())},particle_lines:function(){t.each(d.find(".canvas"),function(){for(var i=t(this),n=i.height()/50*10,e=0;e<=n;e++)i.append('<span class="particle" style="top:'+v(-30,30)+"%; left:"+v(-10,110)+"%; width:"+v(1,5)+"px; height:"+v(20,80)+"%; animation-delay: -"+v(0,30)/10+'s;"></span>')})},particle_circles:function(){t.each(d.find(".canvas"),function(){for(var i=t(this),n=i.width()/50*20,e=0;e<=n;e++){var o=v(4,100);i.append('<span class="particle" style="top:'+v(-10,100)+"%; left:"+v(-10,100)+"%; width:"+o+"px; height:"+o+"px; animation-delay: "+v(0,50)/10+'s;"></span>')}})},particle_network:function(){var t=document.getElementById("canvas"),i={particleColor:"#fff",background:"wp-content/themes/spandigital/images/hero-gradient.png",interactive:!1,speed:"fast",density:"high"};new ParticleNetwork(t,i)}},b={id:null,posTop:null,duration:100,velocity:1,init:function(){this.id=0,this.setPosTop(),this.anchorAnim()},setPosTop:function(){var i=A.navH;b.posTop=[],T.m_view&&i>=50&&(i=48),!T.m_view&&i>=80&&(i=78),h.each(function(n){var e=t(this).position().top-i;e<0&&(e=0),1==n&&(e+=2),b.posTop.push(Math.floor(e))})},setPosId:function(t,i){null!=this.id&&("down"==i?t>=this.posTop[this.id+1]&&this.id<this.posTop.length-1&&(this.id+=1):t<this.posTop[this.id]&&this.id>0&&(this.id-=1))},anchorAnim:function(t,i){var n=T.m_view?100:200;"start"==i&&(n=0),void 0==t?(t=this.id,this.duration=50,n=0):(this.velocity=Math.abs(this.id-t),this.velocity<=0&&(this.velocity=1),this.velocity>2?this.duration=250*this.velocity:2==this.velocity?this.duration=1e3:this.duration=750,this.id=t),o.delay(n).animate({scrollTop:this.posTop[t]},this.duration,"easeInOutCubic",function(){"dlink"==i&&(window.history.pushState?history.pushState(null,"",location.href.split("?")[0]):window.location.href=window.location.href.split("?")[0])})}};return{init:f,get_pageType:function(){return u},getM_view:function(){return T.m_view},posTopUpdate:function(){b.setPosTop()},anchorAnim:function(t,i){b.anchorAnim(t,i)}}}(jQuery),SPANDIGITAL.namespace("main.nav"),SPANDIGITAL.main.nav=function(t){var i,n,e,o,s,a,l,c,r,h,d,u,f,p,m=function(){i=SPANDIGITAL.main,n=SPANDIGITAL.main.landing,f=i.get_pageType(),v(),u=h.attr("href"),p=_(),$.init(),L.init(),"office"==f?(D.init(),O.init(),C.init()):"case-study"==f||(h.on("click",function(t){t.preventDefault(),t.stopPropagation();var n=i.getM_view()?250:500;o.removeClass("nav-open"),o.removeAttr("style"),setTimeout(function(){o.removeClass("nav-on")},n),i.anchorAnim(0)}),a.find("a.start-arrow").on("click",function(t){t.preventDefault(),t.stopPropagation(),i.anchorAnim(1,"start")}),T.init(),g.init(),A.init(),b.init()),I()},v=function(){e=t("html, body"),o=t("body"),s=t("#header"),a=t("#contents"),l=t("#nav-toggle"),c=t("#nav-close"),r=s.find(".navigation a"),h=s.find(".navigation ul.primary-menu li:first-child a"),d=t("#modal-layer")},_=function(){var t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var i=t.offsetWidth;t.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",t.appendChild(n);var e=n.offsetWidth;return t.parentNode.removeChild(t),i-e},$={init:function(){l.on("click",this.nav_toggle_on.bind(this)),c.on("click",this.nav_close_on.bind(this)),r.on("click",this.nav_btn_on.bind(this))},nav_toggle_on:function(n){n.preventDefault(),n.stopPropagation(),o.hasClass("nav-open")?(o.removeClass("nav-open"),o.removeAttr("style"),setTimeout(function(){o.removeClass("nav-on")},500)):(o.addClass("nav-on"),o.addClass("nav-open"),o.css("paddingRight",p+"px"),i.getM_view()&&t("section#leadership .col").hasClass("on")&&(t("section#leadership .col").removeClass("on"),o.removeClass("lock-scroll")))},nav_close_on:function(t){t.preventDefault(),t.stopPropagation(),o.hasClass("nav-open")&&(o.removeClass("nav-open"),o.removeAttr("style"),setTimeout(function(){o.removeClass("nav-on")},500))},nav_btn_on:function(t){t.stopPropagation();var n=i.getM_view()?250:500;o.removeClass("nav-open"),o.removeAttr("style"),setTimeout(function(){o.removeClass("nav-on")},n)}},T={$sect:null,$item:null,$bar:null,$contents:null,id:0,init:function(){this.$sect=a.find("section#capabilities"),this.$item=this.$sect.find("ul.nav-items li.nav"),this.$bar=this.$sect.find("ul.nav-items span.active-bar"),this.$contents=this.$sect.find("ul.contents li.item");var t=this.$item.find("a");t.on("mouseover",this.btn_hover.bind(this)),t.on("mouseout",this.btn_hout.bind(this)),t.on("click",this.btn_clicked.bind(this));var n=T;if(n.$item.eq(n.id).addClass("on"),n.$contents.eq(n.id).addClass("on"),i.getM_view()){var e=n.$item.eq(n.id).find(".contents").outerHeight()+n.$item.find("a").outerHeight();n.$item.eq(n.id).css("height",e+"px")}},update:function(){var t=T,i=t.$sect.find("ul.nav-items li.on").index();if(t.$contents.is(":visible"))t.$item.removeAttr("style"),i||(i=0),t.$item.eq(i).addClass("on"),t.$bar.stop().css("left",20*i+10+"%"),t.$contents.removeClass("on"),t.$contents.eq(i).addClass("on");else{var n=t.$item.eq(i).find(".contents").outerHeight()+t.$item.find("a").outerHeight();t.$item.eq(i).css("height",n+"px")}},btn_hover:function(i){i.preventDefault(),i.stopPropagation();var n=t(i.currentTarget).parent().index(),e=T;e.$bar.stop().css("left",20*n+10+"%")},btn_hout:function(t){t.preventDefault(),t.stopPropagation();var i=T;i.$bar.stop().css("left",20*i.id+10+"%")},btn_clicked:function(n){n.preventDefault(),n.stopPropagation();var o=t(n.currentTarget).parent().index(),s=T;if(s.id=o,s.$contents.is(":visible"))s.$item.removeClass("on"),s.$item.eq(o).addClass("on"),s.$bar.stop().css("left",20*o+10+"%"),s.$contents.removeClass("on"),s.$contents.eq(s.id).addClass("on"),i.posTopUpdate();else{if(s.$item.eq(o).hasClass("on"))s.$item.removeClass("on"),s.$item.removeAttr("style");else{s.$item.removeClass("on"),s.$item.eq(o).addClass("on"),s.$item.removeAttr("style");var a=s.$item.eq(o).find(".contents").outerHeight()+s.$item.find("a").outerHeight();s.$item.eq(o).css("height",a+"px")}setTimeout(function(){i.posTopUpdate(),e.animate({scrollTop:s.$item.eq(o).offset().top-60+"px"},250,"easeInOutCubic")},510)}}},g={$sect:null,$item:null,$content:null,init:function(){this.$sect=a.find("section#work"),this.$item=this.$sect.find("ul.logos li.logo"),this.$content=this.$sect.find("ul.contents li.item");var t=this.$item.find("a");t.on("mouseover",this.logo_hover.bind(this)),this.$content.removeClass("on")},logo_hover:function(i){i.preventDefault(),i.stopPropagation();var n=t(i.currentTarget).parent().index(),e=g;e.$content.removeClass("on"),e.$content.eq(n).addClass("on")}},A={$sect:null,$item:null,$close_btn:null,init:function(){this.$sect=a.find("section#leadership"),this.$item=this.$sect.find(".col"),this.$close_btn=this.$item.find(".bio-box a.close-btn");var t=this.$item.find("a.bio-btn");t.on("click",this.btn_clicked.bind(this)),this.$close_btn.on("click",this.closebtn_clicked.bind(this)),this.$item.removeClass("on")},btn_clicked:function(n){n.preventDefault(),n.stopPropagation();var e=t(n.currentTarget).parent().index(),s=A;i.getM_view()&&o.addClass("lock-scroll"),s.$item.removeClass("on"),s.$item.eq(e).addClass("on")},closebtn_clicked:function(n){n.preventDefault(),n.stopPropagation();var e=t(n.currentTarget).parent().parent();e.removeClass("on"),i.getM_view()&&o.removeClass("lock-scroll")}},b={$sect:null,init:function(){this.$sect=a.find("section#careers");var t=this.$sect.find("a.job-opening-btn");t.on("click",this.job_opening_clicked.bind(this))},job_opening_clicked:function(t){t.preventDefault(),t.stopPropagation();var i=u+t.target.getAttribute("href");console.log(i),window.open(i,"_self",!1)}},D={$box:null,$modal_content:null,init:function(){this.$box=a.find("section#openings .box"),this.$modal_content=d.find(".jobs-content");var t=this.$box.find(".job-nav a"),i=this.$box.find("ul li a");this.$box.addClass("jobs-sf"),t.on("click",this.btn_clicked.bind(this)),i.on("click",this.job_item_clicked.bind(this))},btn_clicked:function(i){i.preventDefault(),i.stopPropagation();var n=t(i.currentTarget).index();n>0?(D.$box.addClass("jobs-cpt"),D.$box.removeClass("jobs-sf")):(D.$box.addClass("jobs-sf"),D.$box.removeClass("jobs-cpt"))},job_item_clicked:function(i){i.preventDefault(),i.stopPropagation();var n=t(i.currentTarget).attr("href"),e=n.substring(n.indexOf("#")+1);L.on("jobs"),t.ajax({url:n,type:"POST",data:{postID:e},success:function(t){L.$container.removeClass("preload"),D.$modal_content.html(t),D.$modal_content.find("a").on("click",function(t){t.preventDefault(),t.stopPropagation();var i=t.target.getAttribute("href");L.off(),window.open(i,"_blank"),D.$modal_content.find("a").off("click")})}})}},O={$container:null,init:function(){this.$container=t("#office-gallery .container"),this.gallery_on()},gallery_on:function(){this.$container.slick({dots:!0,infinite:!0,speed:300,arrows:!1,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0})},gallery_off:function(){this.$container.slick("unslick")}},C={$container:null,init:function(){this.$container=t("#corporate-initiatives .container"),this.corporate_on()},corporate_on:function(){this.$container.slick({dots:!0,infinite:!0,speed:300,arrows:!1,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0})},corporate_off:function(){this.$container.slick("unslick")}},L={$container:null,init:function(){this.$container=d.find(".container");var t=d.find(".close-btn");t.on("click",this.close_clicked.bind(this))},on:function(t){d.addClass(t),o.addClass("lock-scroll"),d.addClass("on")},off:function(){d.removeClass("on"),o.removeClass("lock-scroll"),setTimeout(function(){d.removeClass(),L.$container.html(""),L.$container.addClass("preload")},500)},close_clicked:function(t){t.preventDefault(),t.stopPropagation(),L.off()}},I=function(){t('a[href*="#"]:not([href="#"])').on("click",function(n){if(n.preventDefault(),n.stopPropagation(),location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=t(this.hash);e.length&&"home"==f&&i.anchorAnim(e.index()),"home"!==f&&window.open(u+"?dlink="+this.hash.slice(1),"_self",!1)}})};return{init:m,capabilities_update:T.update}}(jQuery),SPANDIGITAL.namespace("main.landing"),SPANDIGITAL.main.landing=function(t){var i,n,e,o,s,a,l,c,r,h,d=function(){f(),i=SPANDIGITAL.main,n=SPANDIGITAL.main.nav,console.log("LANDING!!!!")},u=function(t){t>=100&&p.init(),m.init()},f=function(){e=t(window),o=t("html, body"),s=t("body"),a=t("#content"),l=a.find(".hero"),c=a.find(".content-body"),r=c.find(".section"),h=c.find(".section.media")},p={$HOME_START_BTN:null,init:function(){this.$HOME_START_BTN=l.find("a.home-start-btn"),this.$HOME_START_BTN.on("click",this.home_start_on.bind(this))},home_start_on:function(t){t.stopPropagation(),t.preventDefault(),i.anchorAnim(1)}},m={$PHOTO_BTN:null,init:function(){this.$PHOTO_BTN=r.find("a.photo-btn"),this.$PHOTO_BTN.on("click",this.photo_btn_on.bind(this))},photo_btn_on:function(n){n.stopPropagation(),n.preventDefault();var e,o=t(n.currentTarget),s=!1;e=i.getUrl_Param(o.attr("href")),"gallery"==e["post-type"]&&e.amount>1&&(s=!0),v.show(e,m.photo_callback,s)},photo_callback:function(){console.log("cb - photoBtn")}},v={$MODAL:null,$MODAL_CLOSE_BTN:null,$MODAL_GRID_BTN:null,$MODAL_SLIDE_BTN:null,$MODAL_P_ITEM_BTN:null,$MODAL_PHOTO:null,$MODAL_CONTAINER:null,$MODAL_UL:null,$MODAL_TITLE:null,cbHolder:null,curP:null,totalP:null,init:function(i){this.$MODAL=t("#modal-layer"),this.$MODAL_CLOSE_BTN=this.$MODAL.find(".close-btn"),this.$MODAL_CONTAINER=this.$MODAL.find("#container"),this.$MODAL_PHOTO=this.$MODAL_CONTAINER.find(".photo-container"),this.$MODAL_TITLE=this.$MODAL_CONTAINER.find(".title"),i&&(this.$MODAL_GRID_BTN=this.$MODAL_CONTAINER.find(".grid-btn"),this.$MODAL_SLIDE_BTN=this.$MODAL_CONTAINER.find(".slide-btn"),this.$MODAL_UL=this.$MODAL_CONTAINER.find("ul"),this.$MODAL_GRID_BTN.on("click",this.grid_view_on.bind(this)),this.$MODAL_SLIDE_BTN.on("click",this.slide_btn_on.bind(this))),this.$MODAL_CLOSE_BTN.on("click",this.hide.bind(this))},show:function(t,i,n){this.init(n),i&&(this.cbHolder=i),n?this.$MODAL_CONTAINER.addClass("gallery-module"):this.$MODAL_CONTAINER.removeClass("gallery-module"),console.log("data: "+t.title),t.title&&this.set_title(t),"gallery"==t["post-type"]?this.set_gallery(t):this.set_photo(t),this.$MODAL.fadeIn(250,"easeInOutCubic"),s.addClass("lock-scroll")},hide:function(t){t.stopPropagation(),t.preventDefault(),null!=v.cbHolder&&v.cbHolder(),s.removeClass("lock-scroll"),v.$MODAL_CONTAINER.removeClass(),v.$MODAL_TITLE.html(""),v.$MODAL.fadeOut(250,"easeInOutCubic",function(){v.$MODAL_CLOSE_BTN&&v.$MODAL_CLOSE_BTN.off(),v.$MODAL_GRID_BTN&&v.$MODAL_GRID_BTN.off(),v.$MODAL_SLIDE_BTN&&v.$MODAL_SLIDE_BTN.off(),v.$MODAL=null,v.$MODAL_CLOSE_BTN=null,v.$MODAL_GRID_BTN=null,v.$MODAL_SLIDE_BTN=null,v.$MODAL_CONTAINER=null,v.$MODAL_TITLE=null,v.cbHolder=null,v.totalP=null,v.$MODAL_P_ITEM_BTN=null})},set_title:function(t){this.$MODAL_TITLE.html(t.title),t.date&&this.$MODAL_TITLE.append("<span>"+t.date+"</span>")},set_gallery:function(t){var i="";this.totalP=t.amount;for(var n=0;n<this.totalP;n++)i+='<li><a class="p_item_btn" href="images/pics/pic'+(n+1)+'.jpg"><div class="thumbnail"><img src="images/pics/pic'+(n+1)+'.jpg" /></div></a></li>';this.$MODAL_UL.html(i),this.$MODAL_CONTAINER.addClass("grid-view"),this.$MODAL_P_ITEM_BTN=this.$MODAL_UL.find("a.p_item_btn"),this.$MODAL_P_ITEM_BTN.on("click",this.photo_item_on.bind(this))},set_photo:function(t){this.$MODAL_PHOTO.html('<div class="thumbnail"><img src="images/pics/pic30.jpg" /></div>')},photo_item_on:function(i){i.stopPropagation(),i.preventDefault();var n=t(i.currentTarget);this.curP=n.parent().index(),console.log(this.curP),this.$MODAL_CONTAINER.removeClass("grid-view"),this.$MODAL_PHOTO.html('<div class="thumbnail"><img src="'+n.attr("href")+'" /></div>')},grid_view_on:function(t){t.stopPropagation(),t.preventDefault(),this.$MODAL_CONTAINER.addClass("grid-view"),this.$MODAL_PHOTO.html("")},slide_btn_on:function(i){i.stopPropagation(),i.preventDefault();var n=t(i.currentTarget);n.hasClass("left")?(this.curP>0?this.curP-=1:this.curP=this.totalP-1,console.log("LEFT "+this.curP)):(this.curP<this.totalP-1?this.curP+=1:this.curP=0,console.log("RIGHT "+this.curP));var e=this.$MODAL_UL.find("li").eq(this.curP).find("a.p_item_btn").attr("href");this.$MODAL_PHOTO.html('<div class="thumbnail"><img src="'+e+'" /></div>')}};return{init:d,handler:u,modalOn:function(t,i){v.show(t,i)},modalOff:function(){v.hide()}}}(jQuery);